<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
       "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <title>Installation Guide</title>
</head>

<body>
<h1>Apache Sandesha2/C Installation Guide</h1>

<p>This document guides you on how to install Sandesha2/C with Axis2/C, and
run the server and client samples on Linux and Microsoft Windows operating
systems.</p>

<p>This release comes in two forms, source and binary. This document covers
both forms.</p>

<p>Please send your feedback to the developer mailing list: <a
href="mailto:axis-c-dev@ws.apache.org">axis-c-dev@ws.apache.org</a>
(Subscription details are available on the <a
href="http://ws.apache.org/sandesha/sandesha2/c">Sandesha2 site</a>.) Please
remember to prefix the subject with [Axis2].</p>

<h2>Contents</h2>
<ul>
  <li><a href="#linux">Installing and Running on Linux</a>
    <ul>
      <li><a href="#linux_source">Using the Source Release</a></li>
      <li><a href="#linux_binary">Using the Binary Release</a></li>
    </ul>
  </li>
  <li><a href="#win">Installing and Running on Microsoft Windows (win32)</a>
    <ul>
      <li><a href="#win_source">Using the Source Release</a></li>
      <li><a href="#win_binary">Using the Binary Release</a></li>
    </ul>
  </li>
</ul>
<a id="linux"></a>

<h2>1. Installing and Running on Linux</h2>

<p>This can be done using binary or source distributions. (<a
href="http://ws.apache.org/sandesha/sandesha2/c/download.cgi">Download</a> the two
distributions)</p>

<a id="linux_source"></a>

<h3>1.1. Installing Sandesha2/C Source Release on Linux</h3>

<p>This version of Sandesha2/C depends on Axis2/C 1.0. <a href="http://ws.apache.org/axis2/c/download.cgi">Download Axis2/C</a> from  and
install. /p>
<ol>
    <li> Download Sandesha2 source distribution</li>
    <li> Extract the source distribution and go to extracted directory</li>
    <li> Run configure with AXIS2 include path.
        <pre>./configure --prefix=&lt;axis2c_deploy_path&gt; --enable-static=no --with-axis2=&lt;axis2c_deploy_path&gt;</pre>
    </li>
    <li>Run make and make install</li>
</ol>
    
This will install the Sandesha2/C as a module in Axis2/C in &lt;axis2c_deploy_path&gt;/modules folder. The module
folder contains the Sandesha2/C libraries and the module.xml file.


<a id="linux_binary"></a>

<h3>1.2. Installing Sandesha2/C Binary Release on Linux</h3>

<p>Sandesha2/C binary distribution for Linux has the following folder structure. </p>
<pre>   
    Sandesha2
        |
        + - modules/sandesha2 (sandesha2 module library and module.xml file)
        + - docs
        + - config (Contain sample module.xml and axis2.xml files)
        |
        + - samples
               |
               + - source files of samples in folders
        + - services (Contain sample service)
        |
        + - include ( header files)
        + - bin (database scripts)
        + - bin/samples ( sample executables)
</pre>
<p>
    To deploy Sandesha2/C in Axis2/C running environment copy the modules/sandesha2 into &lt;axis2c_deploy_path&gt;/modules folder.
    Do the necessary changes to the &lt;axis2c_deploy_path&gt;/axis2.xml to run Sandesha2/C(Refer to the sample config/axis2.xml
    for help).
</p>
<a id="win"></a>

<h2>2. Installing and Running on Microsoft Windows</h2>

<p>This too can be done using binary or source distributions. (<a
href="http://ws.apache.org/sandesha/sandesha2/c/download.cgi">Download</a> the two
distributions.)</p>

<a id="win_source"></a>

<h3>2.1. Installing Sandesha2/C Source Release on Windows</h3>
<ol>
    <li> You need to have unziped Axis2/C 1.0 release binary to some folder.</li>
    <li> Sandesha2/C can be used with one of following two database systems.
            <ul>
                <li>sqlite</li>
                <li>MySQL</li>
             </ul>
         So install one of above database systems on your machine.
    </li>
    <li> On your cmd.exe cd to &lt;sandesha2 src&gt;\build\win32 <br/>
      Edit configure.in file with your binary locations. <br/>
      To select MySQL have your configure.in entry  WITH_MYSQL = 1. <br/>      
      To Select Sqlite have your configure.in entry WITH_SQLITE = 1. 
    </li>
    <li> To set necessary environment variables on command line run vcvars32.bat file. </li>
    <li> Run nmake dist command on command line. This will build the Sandesha2/C binary and samples to a directory sandesha2 in &lt;sandesha2 src&gt;\build\sandesha2. </li>
</ol>

<a id="bin_binaries"></a>

<h3>2. 2. Installing Sandesha2/C Binary Release on Windows</h3>

<p>Sandesha2/C binary distribution will have following directory structure. </p>
<pre>
    Sandesha2
        |
        + - Sandesha2 (sandesha2 module dll and module.xml file)
        |
        + - samples
               |
               + - bin 
               |
               + - source files of samples in folders
        |
        + - include ( header files)

    </pre>
    <ol>    
    <li> Copy Sandesha2 directory ( containing sandesha2 dll and module.xml ) to &lt;AXIS2C_HOME&gt;\modules directory.</li>
    <li> Copy RMSampleService directory in samples\bin directory to &lt;AXIS2C_HOME&gt;\services directory </li>
    <li> Copy axis2.xml file in Sandesha2 directory to &lt;AXIS2C_HOME&gt; </li>
    </ol>
    <p>
    Now you should be able to run the samples.
    </p>

<h3>Notes</h3>
<ol>
<li>
        Sandesha2/C has two main storage mechanisms call in-memory and persistent. The persistent storage could use
        either sqlite or MySQL as it's database manager. <br/>
        By default sandesha2 use the persistent storage with sqlite as the database. <br/>
        It is assumed that sqlite3.h in /usr/include include directory. If you have different include path for
        sqlite3.h then add the configure option --with-sqlite=&lt;sqlite include file path&gt; to the configure options
        above. If is assumed that libsqlite3.so is in the /usr/lib folder <br/>
        To run samples in persistent/sqlite mode copy sandesha2c/config/sqlite_schema.sh/.bat to a directory where you
        will create your sqlite database file and execute it to create the database schema. sqlite3 is an embedded 
        database which need no configuration. If you use Axis2/C Apache2 module instead of simple_axis2_server make 
        sure that Apache2 user can access the sqlite database files sandesha2_svr_db and sandesha2_client_db. <br/>

        if you want to use the in-memory storage instead, change the entry in the sandesha2_constants.h
        file. <br/>
<pre>#define SANDESHA2_DEFAULT_STORAGE_MGR "persistent" 
as
#define SANDESHA2_DEFAULT_STORAGE_MGR "inmemory". </pre>

        If you want to use persistent storage with MySQL then add the option --with-mysql=&lt;MySQL include file path&gt;
        to the configure options above. It is assumed that libmysqlclient.so is in /usr/lib folder. It is recommended
        to use MySQL database for any serious use. It is not included as as the default database because of licensing issues.
        To run samples in persistent/mysql mode run sandesha2c/config/mysql_schema.sh and sandesha2c/config/init_mysql.sh
        to create the database schema. The database parameters for MySQL should be included in module.xml. The defaults for server, user and password are localhost, g,g.
</li>
<li>
       Sandesha2/C module is installed into &lt;axis2c_deploy_path&gt;/modules/sandesha2c directory. The installed module contain
       libsandesha2.so, module.xml. The sample clients are installed into &lt;axis2c_deploy_path&gt;/bin/samples
       directory. Sample services are installed into &lt;axis2c_deploy_path&gt;/services directory.

</li>
</ol>

</body>
</html>
